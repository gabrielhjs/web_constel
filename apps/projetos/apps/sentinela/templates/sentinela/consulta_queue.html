{% extends 'constel/v2/app.html' %}
{% load static %}
{% block app_content %}
<span id="sentinel_is_active_light"></span>
<button class="btn btn-primary btn-lg" id="activate_sentinel" disabled="">
    ativar
</button>
<button class="btn btn-primary btn-lg" id="deactivate_sentinel" disabled="">
    desativar
</button>
<div class="table-responsive table-content">
    <table class="table table-sm table-bordered table-hover table-dark p-0 m-0">
        <thead>
            <tr>
                <th scope="col" colspan="5">Hist√≥rico</th>
            </tr>
            <tr>
                <th scope="col" colspan="2">Wfm</th>
                <th scope="col" colspan="3">Cob</th>
            </tr>
            <tr>
                <th scope="col">Contrato</th>
                <th scope="col">exemplo</th>
                <th scope="col">Status</th>
                <th scope="col">Sinal ONT</th>
                <th scope="col">Sinal OLT</th>
            </tr>
        </thead>
        <tbody id="my_table">
            {% for item in page_obj %}
            <tr class="text-md-left">
                <td>{{ item.codigo }}</td>
                <td>{{ item.material }}</td>
                <td style="font-size: 1.2em;">{{item.quantidade__quantidade }}</td>
                <td style="font-size: 1.2em; color: {% if item.pt <= 15 %}Red{% elif item.pt <= 30 %}Yellow{% else %}Lime{% endif %};">{{ item.pt|default_if_none:'' }}</td>
                <td style="font-size: 1.2em; color: {% if item.pt_min <= 5 %}Red{% elif item.pt_min <= 10 %}Yellow{% else %}Lime{% endif %};">
                    {{ item.pt_min|default_if_none:'' }}
                </td>
                <td style="font-size: 1.2em; color: {% if item.pt_max <= 5 %}Red{% elif item.pt_max <= 10 %}Yellow{% else %}Lime{% endif %};">
                    {{ item.pt_max|default_if_none:'' }}
                </td>
                <td>
                    <a class="btn btn-primary btn-sm"
                        href="{% url 'almoxarifado_consulta_estoque_detalhe' item.codigo %}?{{ request.GET.urlencode }}">
                        <i class="fas fa-chart-line"></i>
                    </a>
                </td>
            </tr>
            {% endfor %}
    </table>
</div>
<script>
    const table = $("#my_table");
</script>
<script src="https://cdn.socket.io/socket.io-3.0.1.min.js"></script>
<script src="{% static 'constel/v2/scripts/sentinela_socketio.js' %}"></script>
{% include 'constel/v2/pagination.html' %}
{% endblock %}